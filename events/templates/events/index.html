{% extends "home.html" %}
{% load static %}
{% load events_tags %}
{% block events %}
<div class="merop">
  <h1>Мероприятия в Астане</h1>
</div>

<div class="d-flex justify-content-between align-items-center mb-2">
  <!-- Navigation including Category and Filter -->
  <nav class="d-flex">
    <ul class="menu list-unstyled mb-0 d-flex">
      <!-- Category Dropdown -->
      <li class="dropdown2">
        <a href="#" class="dropbtn btn btn-dark">Категорий</a>
        <div class="dropdown2-content bg-dark">
          {%tag_categories as categories%}
          {% for category in categories %}
          <a class="dropdown-item text-white" href="{% url "catalog:index" category.slug %}">{{category.name}}</a>
          {% endfor %}
        </div>
      </li>


      <!-- Filter Dropdown -->
      <li class="dropdown2 ms-2">
        <a href="#" class="dropbtn btn btn-dark">Фильтры</a>
        <div class="dropdown2-content bg-dark p-3">
          <form action="{% url "catalog:index" slug_url %}" method="get" data-bs-theme="dark">
            <div class="form-check text-white">
              <input class="form-check-input" type="checkbox" name="on_sale" id="flexCheckDefault" value="on">
              {% comment "" %}<input type="hidden" name="q" value="request.GET.q">{% endcomment %}
              <label class="form-check-label" for="flexCheckDefault">
                Товары по акции
              </label>
            </div>
            <p class="text-white mt-3">Сортировать:</p>
            <div class="form-check text-white">
              <input class="form-check-input" type="radio" name="order_by" id="flexRadioDefault1" value="default" checked>
              <label class="form-check-label" for="flexRadioDefault1">
                По умолчанию
              </label>
            </div>
            <div class="form-check text-white">
              <input class="form-check-input" type="radio" name="order_by" id="flexRadioDefault2" value="-capacity">
              <label class="form-check-label" for="flexRadioDefault2">
                От больше мест
              </label>
            </div>
            <div class="form-check text-white">
              <input class="form-check-input" type="radio" name="order_by" id="flexRadioDefault3" value="capacity">
              <label class="form-check-label" for="flexRadioDefault3">
                От меньше мест
              </label>
            </div>
            <button type="submit" class="btn btn-primary mt-3">Применить</button>
          </form>
        </div>
      </li>
    </ul>
  </nav>
</div>


<div class="search">
  <input type="text" placeholder="Search..">
</div>
<div class="events">
  <div class="event-container">
    {% if events %}
    {% for event in events %}
    <div class="event-item">
      <a href="{% url 'events:about' event.slug %}" class="img">
        <img class="event-img" src="{{ event.image.url }}" />
      </a>
      <div class="event-name">{{ event.name }}</div>
      <div class="event-date">{{ event.start_time.date }}</div>
      <div class="event-time">{{ event.start_time|date:"H:i" }}</div>
    </div>
    {% endfor %}
    {% else %}
    <p>No events found</p>
    {% endif %}
  </div>
  </div>







<nav aria-label="Page navigation example" class="pagination-nav">
  <ul class="pagination justify-content-center my-4">
      <li class="page-item {% if not events.has_previous %}disabled{% endif %}">
        <a class="page-link" href="{% if events.has_previous %}?page={{events.previous_page_number}}{% else %}
        #
        {% endif %}
        ">Назад</a>
      </li>

      {% for page in events.paginator.page_range %}
      {% if page >= events.number|add:-2 and page <= events.number|add:+2 %}
      <li 
      class="page-item {% if events.number == page %}active{% endif %}">
      <a class="page-link" href="?page={{page}}">{{page}}</a>
      </li>
      {% endif %}
      {% endfor %}
      
      <li class="page-item {% if not events.has_next %}disabled{% endif %}">
        <a class="page-link" href="{% if events.has_next %}?page={{events.next_page_number}}{% else %}
        #
        {% endif %}
        ">Следующая</a>
      </li>
  </ul>
</nav>
{% endblock %}


